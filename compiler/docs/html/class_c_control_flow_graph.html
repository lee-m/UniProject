<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CP3343: CControlFlowGraph Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>CControlFlowGraph Class Reference</h1><!-- doxytag: class="CControlFlowGraph" --><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_control_flow_graph.html#1c1dfef23c914090abfd5ce16a451d9b">CControlFlowGraph</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_control_flow_graph.html#f57ee9de204b12713b5e2c66d695486e">~CControlFlowGraph</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_control_flow_graph.html#e4284049a7a3b1ba914341fd3c208ad1">BuildControlFlowGraph</a> (<a class="el" href="class_c_function_decl_tree_node.html">CFunctionDeclTreeNode</a> **FnDecl, bool DumpGraph)</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_control_flow_graph.html#8001ed3cee8cfd2af9edb5fe36da33c5">FindBasicBlocks</a> (<a class="el" href="class_c_function_decl_tree_node.html">CFunctionDeclTreeNode</a> **FnDecl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_control_flow_graph.html#32b4d56fa9ef7afa6b17929b7a8bf374">ComputeEdges</a> (<a class="el" href="class_c_function_decl_tree_node.html">CFunctionDeclTreeNode</a> **FnDecl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_control_flow_graph.html#92a48ff4b41b85309f8df8124881a464">IsLeader</a> (<a class="el" href="class_c_tree_node.html">CTreeNode</a> *Stmt)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_control_flow_graph.html#dbda85295ac2245aaf5e2f941f31ced8">DumpControlFlowGraph</a> (<a class="el" href="class_c_function_decl_tree_node.html">CFunctionDeclTreeNode</a> *FnDecl)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">multimap&lt; string, <a class="el" href="struct_basic_block__t.html">BasicBlock_t</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_control_flow_graph.html#6d594e4dfb66798bd1f6fa090866dea9">m_Edges</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Control flow graph construction pass of the compiler to be run right after MIR lowering. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="1c1dfef23c914090abfd5ce16a451d9b"></a><!-- doxytag: member="CControlFlowGraph::CControlFlowGraph" ref="1c1dfef23c914090abfd5ce16a451d9b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CControlFlowGraph::CControlFlowGraph           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f57ee9de204b12713b5e2c66d695486e"></a><!-- doxytag: member="CControlFlowGraph::~CControlFlowGraph" ref="f57ee9de204b12713b5e2c66d695486e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CControlFlowGraph::~CControlFlowGraph           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="e4284049a7a3b1ba914341fd3c208ad1"></a><!-- doxytag: member="CControlFlowGraph::BuildControlFlowGraph" ref="e4284049a7a3b1ba914341fd3c208ad1" args="(CFunctionDeclTreeNode **FnDecl, bool DumpGraph)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CControlFlowGraph::BuildControlFlowGraph           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_function_decl_tree_node.html">CFunctionDeclTreeNode</a> **&nbsp;</td>
          <td class="paramname"> <em>FnDecl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>DumpGraph</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Build the CFG for a function. This occurrs in two passes over the function's statements. The first partitions the statements into basic blocks with the second pass computing the edges between them. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>FnDecl</em>&nbsp;</td><td>The function declaration we want to calculate the CFG for. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>DumpGraph</em>&nbsp;</td><td>If this is true, dump the computed graph to a file. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="8001ed3cee8cfd2af9edb5fe36da33c5"></a><!-- doxytag: member="CControlFlowGraph::FindBasicBlocks" ref="8001ed3cee8cfd2af9edb5fe36da33c5" args="(CFunctionDeclTreeNode **FnDecl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CControlFlowGraph::FindBasicBlocks           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_function_decl_tree_node.html">CFunctionDeclTreeNode</a> **&nbsp;</td>
          <td class="paramname"> <em>FnDecl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Partition the input statements into a series of basic blocks. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>FnDecl</em>&nbsp;</td><td>The function declaration we're processing. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="32b4d56fa9ef7afa6b17929b7a8bf374"></a><!-- doxytag: member="CControlFlowGraph::ComputeEdges" ref="32b4d56fa9ef7afa6b17929b7a8bf374" args="(CFunctionDeclTreeNode **FnDecl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CControlFlowGraph::ComputeEdges           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_function_decl_tree_node.html">CFunctionDeclTreeNode</a> **&nbsp;</td>
          <td class="paramname"> <em>FnDecl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Build the edges between the basic blocks using the edge information stored during basic block partitioning. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>FnDecl</em>&nbsp;</td><td>Function declaration whose CFG we compute the edges for. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="92a48ff4b41b85309f8df8124881a464"></a><!-- doxytag: member="CControlFlowGraph::IsLeader" ref="92a48ff4b41b85309f8df8124881a464" args="(CTreeNode *Stmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CControlFlowGraph::IsLeader           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_tree_node.html">CTreeNode</a> *&nbsp;</td>
          <td class="paramname"> <em>Stmt</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if the statement passed is classified as a leader statement that marks the beginning of a new basic block. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Stmt</em>&nbsp;</td><td>Statement to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if Stmt is a leader otherwise false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="dbda85295ac2245aaf5e2f941f31ced8"></a><!-- doxytag: member="CControlFlowGraph::DumpControlFlowGraph" ref="dbda85295ac2245aaf5e2f941f31ced8" args="(CFunctionDeclTreeNode *FnDecl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CControlFlowGraph::DumpControlFlowGraph           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_function_decl_tree_node.html">CFunctionDeclTreeNode</a> *&nbsp;</td>
          <td class="paramname"> <em>FnDecl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Output the CFG for a function to a file for debugging. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>FnDecl</em>&nbsp;</td><td>Function declaration whose CFG we're outputting. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="6d594e4dfb66798bd1f6fa090866dea9"></a><!-- doxytag: member="CControlFlowGraph::m_Edges" ref="6d594e4dfb66798bd1f6fa090866dea9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">multimap&lt;string, <a class="el" href="struct_basic_block__t.html">BasicBlock_t</a>*&gt; <a class="el" href="class_c_control_flow_graph.html#6d594e4dfb66798bd1f6fa090866dea9">CControlFlowGraph::m_Edges</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
When we're building the edges of the CFG, we don't want to do a linear search over all the basic blocks to find predecessors and successors as this would require 3 passes to complete - 1 to find the blocks and 1 each for preds/succs. To speed things up when we find the basic blocks, we store their entry label and exit jump location (if present) in the following multimap along with the corresponding basic block. Now when we go to build the edges for say successors, we can use the standard algorithm equal_range to find the basic block whose entry label matches the current block's exit jump. Similarly for predecessors we can use the same equal_range function, only this time the returned results will be all the blocks which have an exit jump to the current blocks entry label. The multimap search algorithms are logarithmic in nature so we reduce the complexity by an order of magnitude. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_c_control_flow_graph_8h.html">CControlFlowGraph.h</a><li><a class="el" href="_c_control_flow_graph_8cpp.html">CControlFlowGraph.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed May 16 12:56:51 2007 for CP3343 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
