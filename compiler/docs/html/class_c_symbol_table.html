<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CP3343: CSymbolTable Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>CSymbolTable Class Reference</h1><!-- doxytag: class="CSymbolTable" --><!-- doxytag: inherits="ISingleton&lt; CSymbolTable &gt;" -->Inheritance diagram for CSymbolTable:<p><center><img src="class_c_symbol_table__inherit__graph.png" border="0" usemap="#_c_symbol_table__inherit__map" alt="Inheritance graph"></center>
<map name="_c_symbol_table__inherit__map">
<area href="class_i_singleton.html" shape="rect" coords="5,5,197,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_symbol_table.html#c5e64236b75b39aee5705e78cc712cae">CSymbolTable</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_symbol_table.html#6f139206979c6bd037dc67a1ea516d1c">~CSymbolTable</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_symbol_table.html#36d8f79eca9db18da2b744c8fcc4a634">PushNewSymbolScope</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_symbol_table.html#a81df30675a646da64a7123c4fb59843">PopSymbolScope</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_symbol_table.html#c9c1750561847ad198221a1bfe2a96ec">AddSymbol</a> (const string &amp;Name, <a class="el" href="class_c_tree_node.html">CTreeNode</a> *Ptr, int LineNo, <a class="el" href="_token_types_8h.html#a520fbf142ba1e7e659590c07da31921">TokenType</a> Type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_symbol__t.html">Symbol_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_symbol_table.html#160d0e086ab7a178765e17c90c449266">LookupIdentifier</a> (const string &amp;Identifier, bool LocalScopeOnly)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_symbol_table.html#142538384448dbae7d39633700acc5c5">Reset</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_symbol_table.html#87cfe4ed4a82f4309bec8ef6d90b6be5">AtGlobalScope</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_scope__t.html">Scope_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_symbol_table.html#b5f5c437fb514b9cb35b7ee1b1e7608d">m_CurrentScope</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Store information about each defined symbol in the program with efficient methods for looking them up by name. Each variable which is declared is stored within a particular scope with only variables declared inside the current scope, or any directly accessible from it being visible. Once a scope exits, all symbols within it are lost. Internally the scopes are represented as a singly linked list with pointers to the previous scope stored at each point with the exception of the global scope which will always have a NULL parent. <br>
<br>
 After the initial parsing phase, the contents of the symbol table are discarded and rebuilt during the subsequent MIR lowering. This is to take into account any new temporaries created during this pass. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="c5e64236b75b39aee5705e78cc712cae"></a><!-- doxytag: member="CSymbolTable::CSymbolTable" ref="c5e64236b75b39aee5705e78cc712cae" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSymbolTable::CSymbolTable           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="6f139206979c6bd037dc67a1ea516d1c"></a><!-- doxytag: member="CSymbolTable::~CSymbolTable" ref="6f139206979c6bd037dc67a1ea516d1c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSymbolTable::~CSymbolTable           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="36d8f79eca9db18da2b744c8fcc4a634"></a><!-- doxytag: member="CSymbolTable::PushNewSymbolScope" ref="36d8f79eca9db18da2b744c8fcc4a634" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSymbolTable::PushNewSymbolScope           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open a new scope into which we'll be inserting symbols. 
</div>
</div><p>
<a class="anchor" name="a81df30675a646da64a7123c4fb59843"></a><!-- doxytag: member="CSymbolTable::PopSymbolScope" ref="a81df30675a646da64a7123c4fb59843" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSymbolTable::PopSymbolScope           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Move back up one level in the scope list, destroying the current scope in the process. Any attempt to pop the global scope will trigger an ICE. 
</div>
</div><p>
<a class="anchor" name="c9c1750561847ad198221a1bfe2a96ec"></a><!-- doxytag: member="CSymbolTable::AddSymbol" ref="c9c1750561847ad198221a1bfe2a96ec" args="(const string &amp;Name, CTreeNode *Ptr, int LineNo, TokenType Type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSymbolTable::AddSymbol           </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_tree_node.html">CTreeNode</a> *&nbsp;</td>
          <td class="paramname"> <em>Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>LineNo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_token_types_8h.html#a520fbf142ba1e7e659590c07da31921">TokenType</a>&nbsp;</td>
          <td class="paramname"> <em>Type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Insert the identifier into the current scope, it's the caller's responsibility to make sure no conflicts arise from this symbol before insertion. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>The name of the symbol being inserted. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Ptr</em>&nbsp;</td><td>Pointer to the tree node constructed for this symbol. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>LineNo</em>&nbsp;</td><td>Line number the symbol was declared on. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Type</em>&nbsp;</td><td>The declared type of the symbol being added. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="160d0e086ab7a178765e17c90c449266"></a><!-- doxytag: member="CSymbolTable::LookupIdentifier" ref="160d0e086ab7a178765e17c90c449266" args="(const string &amp;Identifier, bool LocalScopeOnly)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_symbol__t.html">Symbol_t</a> * CSymbolTable::LookupIdentifier           </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>Identifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>LocalScopeOnly</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check if the declaration for the identifier is visible from the current scope. If LocalScopeOnly is set to true then only symbols in the current scope are checked, any parent scopes are ignored. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Identifier</em>&nbsp;</td><td>The name of the symbol to look up. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>LocalScopeOnly</em>&nbsp;</td><td>Only look for the identifier in the current scope. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to the symbol object for the identifier if found, otherwise NULL. </dd></dl>

</div>
</div><p>
<a class="anchor" name="142538384448dbae7d39633700acc5c5"></a><!-- doxytag: member="CSymbolTable::Reset" ref="142538384448dbae7d39633700acc5c5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSymbolTable::Reset           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reset the table back to it's original state, destroying any scopes we've got. 
</div>
</div><p>
<a class="anchor" name="87cfe4ed4a82f4309bec8ef6d90b6be5"></a><!-- doxytag: member="CSymbolTable::AtGlobalScope" ref="87cfe4ed4a82f4309bec8ef6d90b6be5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CSymbolTable::AtGlobalScope           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
See if we're at global scope. <dl class="return" compact><dt><b>Returns:</b></dt><dd>True if we're at global scope, otherwise false. </dd></dl>

</div>
</div><p>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="b5f5c437fb514b9cb35b7ee1b1e7608d"></a><!-- doxytag: member="CSymbolTable::m_CurrentScope" ref="b5f5c437fb514b9cb35b7ee1b1e7608d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_scope__t.html">Scope_t</a>* <a class="el" href="class_c_symbol_table.html#b5f5c437fb514b9cb35b7ee1b1e7608d">CSymbolTable::m_CurrentScope</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Current scope we're adding symbols to (and any enclosing scopes). 
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_c_symbol_table_8h.html">CSymbolTable.h</a><li><a class="el" href="_c_symbol_table_8cpp.html">CSymbolTable.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed May 16 12:56:55 2007 for CP3343 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
